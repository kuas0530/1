cmake_minimum_required(VERSION 3.13)

# å¼•å…¥ SDK
include($ENV{PICO_SDK_PATH}/pico_sdk_init.cmake)

project(host_hid C CXX ASM)
set(CMAKE_C_STANDARD 11)
set(CMAKE_CXX_STANDARD 17)

pico_sdk_init()

# ğŸ’¥ é—œéµï¼šè‡ªå‹•ä¸‹è¼‰ pico-pio-usb å‡½å¼åº«
include(FetchContent)
FetchContent_Declare(
  pico_pio_usb
  GIT_REPOSITORY https://github.com/sekigon-gonnoc/pico-pio-usb
  GIT_TAG        main
)
FetchContent_MakeAvailable(pico_pio_usb)

# å»ºç«‹åŸ·è¡Œæª”
add_executable(host_hid
    src/main.c
    src/usb_descriptors.c
    src/hid_reports.c
)

# åŒ…å«è·¯å¾‘
target_include_directories(host_hid PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/src
)

# é€£çµåº« (åŒ…å« PIO USB)
target_link_libraries(host_hid
    pico_stdlib
    pico_multicore
    tinyusb_host
    tinyusb_device
    tinyusb_board
    pico_pio_usb  # <--- é€£çµé€™å€‹åº«
)

# ç¦ç”¨ stdio USB é¿å…è¡çª
pico_enable_stdio_usb(host_hid 0)
pico_enable_stdio_uart(host_hid 1)

# ç”¢ç”Ÿ uf2
pico_add_extra_outputs(host_hid)